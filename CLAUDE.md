# CLAUDE.md

## プロジェクト概要

本リポジトリは **Raspberry Pi 上で実行すること**を想定したプロジェクトです。

OpenAI API を使用した最小限の GPT 応答テストを行い、ニュース掲示板システムの基盤を構築します。

---

## 作業開始前の必須確認事項

作業を開始する前に、必ず **要件定義書** を確認してください。

- **要件定義書**: `09_001_gpt_response_minimal｜要件定義書.md`

要件定義書には以下の重要な情報が含まれています：

- プロジェクトのスコープ（実施すること/実施しないこと）
- 機能要件（FR）と非機能要件（NFR）
- 環境構築・実行手順
- エラーハンドリング方針
- 受け入れ基準（DoD）

---

## 開発環境

- **対象プラットフォーム**: Raspberry Pi（Raspberry Pi OS Bookworm 相当）
- **Python バージョン**: 3.9+
- **主要な依存関係**:
  - `openai`
  - `python-dotenv`
  - `requests`

---

## コーディング規約

本プロジェクトでは、以下のコーディング規約に従ってコードを作成します：

### 必須ドキュメント

1. **Python コーディングガイドライン**: `python_coding_guidelines.md`
   - PEP 8 準拠の基本方針
   - `if __name__ == "__main__":` の使用
   - 関数化、docstring、命名規則
   - エラーハンドリング方針

2. **コメントスタイルガイド**: `COMMENT_STYLE_GUIDE.md`
   - ファイルヘッダーコメント
   - クラス・メソッドのdocstring
   - インラインコメントの記載方法
   - エラーハンドリングのコメント

### 重要なルール

- **シバン**: すべての実行可能なPythonファイルに `#!/usr/bin/env python3` を記載
- **ファイルヘッダー**: プロジェクト名、説明、要件定義書への参照を記載
- **関数化**: グローバルに実行されるコードは関数に移動
- **docstring**: すべての関数・クラスに日本語で簡潔に記載
- **インラインコメント**: 初心者向けに処理の意図や背景を説明
- **エラーメッセージ**: 具体的な対処方法とヒントを含める

**コードを作成・修正する際は、必ずこれらの規約を確認してください。**

---

## セキュリティ上の注意

- `.env` ファイルに API キーを保存し、**絶対に Git にコミットしない**こと
- `.gitignore` に `.env` が含まれていることを確認すること
- API キーが漏洩した場合は速やかにローテーションすること

---

## 作業フロー

1. 要件定義書を読む（`09_001_gpt_response_minimal｜要件定義書.md`）
2. 環境構築を行う（`README.md` 参照）
3. `.env` ファイルに API キーを設定する
4. 実装・テストを行う
5. **エラーが発生した場合は `TROUBLESHOOTING.md` を確認する**
6. 受け入れ基準（DoD）を満たしているか確認する

---

## トラブルシューティング

エラーが発生した場合は、**必ず `TROUBLESHOOTING.md`** を確認してください。

`TROUBLESHOOTING.md` には以下の情報が記載されています：

- これまでに発生したエラーとその対策
- APIパラメータ関連のエラー（`max_tokens`, `temperature` など）
- 応答内容が空になる問題
- 環境・依存関係の問題
- 認証・ネットワークの問題
- よくある質問（FAQ）

**新しいエラーが発生した場合:**
- エラーメッセージと対策を `TROUBLESHOOTING.md` に追記する
- 将来の開発者やユーザーのためのノウハウとして記録する

---

## 関連ドキュメント

- `README.md`: セットアップと実行手順
- `09_001_gpt_response_minimal｜要件定義書.md`: 詳細な要件定義
- `TROUBLESHOOTING.md`: **エラーと対策のノウハウ集（重要）**
- `python_coding_guidelines.md`: **Pythonコーディング規約（必読）**
- `COMMENT_STYLE_GUIDE.md`: **コメント記載標準ガイド（必読）**
- `requirements.txt`: Python 依存関係リスト
